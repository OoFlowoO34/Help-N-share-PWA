{% extends 'base.html.twig' %}

{% block title %}Messagerie{% endblock %}

{% block body %}
<header class="pt-5 pb-5 d-flex flex-wrap flex-column">
        <h1 class="text-center pt-5 pb-5">Messagerie</h1>    
</header>
<main>

    {% for demand_relation in demand_relations %}
    <div class="col m-3">          
        <div class="card shadow border-0">
            <div class="card-body d-flex flex-row">
                <div class="container">
                    <div class="row">
                        <div class="col-auto">
                            <div class="card-img-top photo-profile mt-3 mb-3">
                            {% if app.user == demand_relation.getDemand().getUser()  %} 
                                {% if  demand_relation.getUser().photo %}
                                     <img src="{{ asset('photos/' ~ demand_relation.getUser().photo) }}" alt="">
                                {% else %}
                                    <img src="{{ asset('photos/default_photo_profil.png') }}" alt="">
                                {% endif %}
                            {% else %}
                                {% if  demand_relation.getDemand().getUser().photo %}
                                    <img src="{{ asset('photos/' ~ demand_relation.getDemand().getUser().photo) }}" alt="">
                                {% else %}
                                    <img src="{{ asset('photos/default_photo_profil.png') }}" alt="">
                                {% endif %}        
                            {% endif %}
                            </div>
                        </div>

                        <div class="col-auto align-self-center">

                            <div class="row">
                                    {% if app.user == demand_relation.getDemand().getUser()  %}
                                        <span>{{ demand_relation.getUser().pseudo }}</span>
                                    {% else %}
                                
                                        <span>{{ demand_relation.getDemand().getUser().pseudo }}</span>
                            
                                    {% endif %}
                            </div>
                            {# <div class="row">
                                    <small class="text-muted">{{ demand_relation.getDemand().getUser().location }}</small>
                            </div> #}                         

                        </div>
                        
                        <div class="col-md align-self-center">
                            <div class="row">
                                <div class="col-auto align-self-center m-auto">
                                    <span id="message-chevron-right" class="material-icons align-middle">
                                        chevron_right
                                    </span>
                                    <span id="message-chevron-down" class="material-icons align-middle">
                                        expand_more
                                    </span>
                                </div>
                                <div class="col-md">
                                    <p class="card-title m-0">{{ demand_relation.getDemand().title }}</p>
                                </div>

                            </div>

                                
                        </div>


                        <div class="col-lg align-self-center text-end">
                            <a class="btn btn-primary stretched-link text-right" href="{{ path('app_my_message', {'id_demand_relation': demand_relation.id}) }}">Voir messages</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
        {% else %}
            
                <span>Aucun message</span>
        
        {% endfor %}
    
</main>    
<script>

</script>
{% endblock %}
